var ibusy;(()=>{"use strict";var e={443:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Error=t.ErrorCodes=void 0;var r=function(){function e(){}return e.ER_PERIOD_START_DATE_AFTER_END_DATE={key:1,description:"period start time greater than the end time"},e.ER_INVALID_PERIOD={key:2,description:"invalid period the period format should be on this format YYYY-MM-DDTHH:mm:ss.sssZ"},e.ER_EXISTS_INTO_ALLOW_PERIODS={key:3,description:"the date exists into allowed periods"},e.ER_EXISTS_INTO_Disallowed_PERIODS={key:4,description:"the date exists into disallowed periods"},e}();t.ErrorCodes=r;var i=function(){function e(e){this.errorCode=e}return e.make=function(t){return new e(t)},e}();t.Error=i},444:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IBusy=void 0;var i=r(443),n=r(699),o=r(909),s=function(){function e(){this.timeUnit=n.TimeUnit.millSeconds,this.periodValidator=new o.PeriodValidator,this._config={dateFormat:"YYYY-MM-DDTHH:mm:ss.sssZ",locale:"en-US"}}return e.prototype.getAllowedPeriodsBetween=function(e,t){for(var r=[],n=0,o=e;n<o.length;n++){var s=o[n];if(!this.periodValidator.isEndDateAfterStartDate(s))throw i.Error.make(i.ErrorCodes.ER_PERIOD_START_DATE_AFTER_END_DATE);if(!this.periodValidator.isUniquePeriod(r,s))throw i.Error.make(i.ErrorCodes.ER_EXISTS_INTO_ALLOW_PERIODS);r.push(this.transformToPeriod(s))}for(var a=[],d=0,T=t;d<T.length;d++){var u=T[d];if(!this.periodValidator.isEndDateAfterStartDate(u))throw i.Error.make(i.ErrorCodes.ER_PERIOD_START_DATE_AFTER_END_DATE);if(!this.periodValidator.isUniquePeriod(a,u))throw i.Error.make(i.ErrorCodes.ER_EXISTS_INTO_Disallowed_PERIODS);a.push(this.transformToPeriod(u))}if(!(null==r?void 0:r.length))return r;if(!(null==a?void 0:a.length))return a;for(var m=this.sortingAndMergePeriods(r),c=this.sortingAndMergePeriods(a),h=[],l=0,f=m;l<f.length;l++)for(var v=(s=f[l]).startTime,D=s.endTime,_=0;_<c.length;){var p=c[_];p.startTime<=v&&p.endTime>v&&p.endTime<D?v=p.endTime:p.startTime>v&&(D=p.startTime,h.push({start:this.convertToDate(v),end:this.convertToDate(D),startTime:v,endTime:D,duration:D-v}),p.endTime>v&&p.endTime<s.endTime&&(v=p.endTime),D=s.endTime),_===c.length-1&&p.endTime<s.endTime&&(v=p.endTime,D=s.endTime,h.push({start:this.convertToDate(v),end:this.convertToDate(D),startTime:v,endTime:D,duration:D-v})),_++}return h},e.prototype.transformToPeriod=function(e){return{start:this.convertToDate(this.convertDateToUnit(e.start,n.TimeUnit.millSeconds)),end:this.convertToDate(this.convertDateToUnit(e.end,n.TimeUnit.millSeconds)),startTime:this.convertDateToUnit(e.start,this.timeUnit),endTime:this.convertDateToUnit(e.end,this.timeUnit),duration:this.convertDateToUnit(e.end,this.timeUnit)-this.convertDateToUnit(e.start,this.timeUnit)}},e.prototype.convertToDate=function(e){return new Date(e).toISOString()},e.prototype.convertDateToUnit=function(e,t){var r=new Date(e).getTime();switch(t){case n.TimeUnit.hours:return(r+0)/36e5;case n.TimeUnit.minutes:return(r+0)/6e4;case n.TimeUnit.seconds:return(r+0)/1e3;default:return r+0}},e.prototype.sortingAndMergePeriods=function(e){for(var t=[],r=0,i=(e=e.sort((function(e,t){return e.start<t.start?-1:e.start>t.start?1:0})))[r].startTime,n=e[r].endTime;r<e.length;){if(!e[r+1]){t.push({start:this.convertToDate(i),end:this.convertToDate(n),startTime:i,endTime:n,duration:n-i});break}var o=e[r+1].startTime,s=e[r+1].endTime;s>n&&o<n&&o>i||n===o?n=s:o>n&&(t.push({start:this.convertToDate(i),end:this.convertToDate(n),startTime:i,endTime:n,duration:n-i}),i=o,n=s),r++}return t},e}();t.IBusy=s},607:function(e,t,r){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(444),t),n(r(699),t),n(r(909),t),n(r(443),t)},699:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TimeUnit=void 0,(r=t.TimeUnit||(t.TimeUnit={}))[r.hours=0]="hours",r[r.minutes=1]="minutes",r[r.seconds=2]="seconds",r[r.millSeconds=3]="millSeconds"},909:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PeriodValidator=void 0;var r=function(){function e(){}return e.prototype.isEndDateAfterStartDate=function(e){return!(new Date(e.end).getTime()-new Date(e.start).getTime()<=0)},e.prototype.isUniquePeriod=function(e,t){return!e.find((function(e){return t===e}))},e}();t.PeriodValidator=r}},t={},r=function r(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,r),o.exports}(607);ibusy=r})();