var ibusy;(()=>{"use strict";var r={443:(r,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Error=t.ErrorCodes=void 0;var e=function(){function r(){}return r.ER_PERIOD_START_DATE_AFTER_END_DATE={key:1,description:"period start time greater than the end time"},r.ER_INVALID_PERIOD={key:2,description:"invalid period the period format should be on this format YYYY-MM-DDTHH:mm:ss.sssZ"},r.ER_EXISTS_INTO_ALLOW_PERIODS={key:3,description:"the date exists into allowed periods"},r.ER_EXISTS_INTO_Disallowed_PERIODS={key:4,description:"the date exists into disallowed periods"},r}();t.ErrorCodes=e;var o=function(){function r(r){this.errorCode=r}return r.make=function(t){return new r(t)},r}();t.Error=o},444:(r,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IBusy=void 0;var o=e(443),n=e(909),i=function(){function r(){this.periodValidator=new n.PeriodValidator}return r.prototype.getAllowedPeriodsBetween=function(r,t){for(var e=[],n=0,i=r;n<i.length;n++){var d=i[n];if(!this.periodValidator.isEndDateAfterStartDate(d))throw o.Error.make(o.ErrorCodes.ER_PERIOD_START_DATE_AFTER_END_DATE);if(!this.periodValidator.isUniquePeriod(e,d))throw o.Error.make(o.ErrorCodes.ER_EXISTS_INTO_ALLOW_PERIODS);e.push(this.transformToPeriod(d))}for(var a=[],s=0,u=t;s<u.length;s++){var f=u[s];if(!this.periodValidator.isEndDateAfterStartDate(f))throw o.Error.make(o.ErrorCodes.ER_PERIOD_START_DATE_AFTER_END_DATE);if(!this.periodValidator.isUniquePeriod(a,f))throw o.Error.make(o.ErrorCodes.ER_EXISTS_INTO_Disallowed_PERIODS);a.push(this.transformToPeriod(f))}if(!(null==e?void 0:e.length))return e;if(!(null==a?void 0:a.length))return a;for(var _=this.sortingAndMergePeriods(e),l=this.sortingAndMergePeriods(a),p=[],E=0,c=_;E<c.length;E++)for(var h=(d=c[E]).start,v=d.end,D=0;D<l.length;){var T=l[D];T.start<=h&&T.end>h&&T.end<v?h=T.end:T.start>h&&(v=T.start,p.push({start:h,end:v,duration:v-h}),T.end>h&&T.end<d.end&&(h=T.end),v=d.end),D===l.length-1&&T.end<d.end&&(h=T.end,v=d.end,p.push({start:h,end:v,duration:v-h})),D++}return p},r.prototype.transformToPeriod=function(r){return{start:r.start,end:r.end,duration:r.end-r.start}},r.prototype.convertToDate=function(r){return new Date(r).toString()},r.prototype.sortingAndMergePeriods=function(r){for(var t=[],e=0,o=(r=r.sort((function(r,t){return r.start<t.start?-1:r.start>t.start?1:0})))[e].start,n=r[e].end;e<r.length;){if(!r[e+1]){t.push({start:o,end:n,duration:n-o});break}var i=r[e+1].start,d=r[e+1].end;d>n&&i<n&&i>o||n===i?n=d:i>n&&(t.push({start:o,end:n,duration:n-o}),o=i,n=d),e++}return t},r}();t.IBusy=i},607:function(r,t,e){var o=this&&this.__createBinding||(Object.create?function(r,t,e,o){void 0===o&&(o=e),Object.defineProperty(r,o,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,o){void 0===o&&(o=e),r[o]=t[e]}),n=this&&this.__exportStar||function(r,t){for(var e in r)"default"===e||Object.prototype.hasOwnProperty.call(t,e)||o(t,r,e)};Object.defineProperty(t,"__esModule",{value:!0}),n(e(444),t),n(e(699),t),n(e(909),t),n(e(443),t)},699:(r,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},909:(r,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PeriodValidator=void 0;var e=function(){function r(){}return r.prototype.isEndDateAfterStartDate=function(r){return!(new Date(r.end).getTime()-new Date(r.start).getTime()<=0)},r.prototype.isUniquePeriod=function(r,t){return!r.find((function(r){return t.start===r.start&&t.end===r.end}))},r}();t.PeriodValidator=e}},t={},e=function e(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={exports:{}};return r[o].call(i.exports,i,i.exports,e),i.exports}(607);ibusy=e})();